# File overview:
# - Purpose: Railway deployment config; builds via Dockerfile and runs compiled server.
# - Reached from: Railway platform on deploy.
[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "node dist/main.js"
healthcheckPath = "/"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[env]
# Environment Configuration
ENVIRONMENT = "production"
NODE_ENV = "production"

# Google OAuth
EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID = "430191522654-o70t2qnqc4bvpvmbpak7unog7pvp9c95.apps.googleusercontent.com"

# CORS - Production domains only
CORS_ORIGIN = "https://karma-community-kc.com,https://www.karma-community-kc.com"

# Security
JWT_SECRET = "495e8b4123c87ffdc9623ae0db9d8cf2522377627aec8f08051039419cf6ad60"

# Database and Redis will be automatically set by Railway plugins
# Make sure each environment has its own Postgres and Redis plugins!
